<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Время прибытия</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; }
      form { display: grid; gap: 0.75rem; max-width: 360px; }
      label { display: grid; gap: 0.25rem; }
      input { padding: 0.5rem; font-size: 1rem; }
      button { padding: 0.6rem 1rem; font-size: 1rem; cursor: pointer; }
      output { display: block; margin-top: 1rem; font-weight: 600; }
      .error { color: #b00020; }
    </style>
  </head>
  <body>
    <h1>Время прибытия</h1>

    <form id="arrival-form" novalidate>
      <label>
        Час по расписанию (0–23)
        <input id="scheduled" name="scheduled" type="number" inputmode="numeric" min="0" max="23" step="1" placeholder="0" required>
      </label>
      <label>
        Опоздание (часы, ≥ 0)
        <input id="delay" name="delay" type="number" inputmode="numeric" min="0" step="1" placeholder="0" required>
      </label>
      <div>
        <button type="submit">Рассчитать</button>
        <button type="reset">Сбросить</button>
      </div>
      <output id="result" for="scheduled delay" aria-live="polite"></output>
    </form>

    <script type="module">
      import { computeArrival } from './dist/index.js';

      const form = document.getElementById('arrival-form');
      const scheduledInput = document.getElementById('scheduled');
      const delayInput = document.getElementById('delay');
      const resultEl = document.getElementById('result');

      function setResult(message, isError = false) {
        resultEl.textContent = message;
        resultEl.className = isError ? 'error' : '';
      }

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        setResult('');

        try {
          const scheduledRaw = (scheduledInput.value ?? '').trim();
          const delayRaw = (delayInput.value ?? '').trim();
          const arrival = computeArrival(scheduledRaw, delayRaw);
          setResult(`Новое время прибытия: ${arrival}`);
        } catch (err) {
          setResult(err instanceof Error ? err.message : 'Неизвестная ошибка.', true);
        }
      });
    </script>
  </body>
  </html>


